(()=>{"use strict";const t=new class{constructor(){this.board=null}createBoard(t){const e=document.createElement("div");e.classList.add("board"),e.classList.add("hammer");for(let s=0;s<Math.floor(t)**2;s+=1){const t=document.createElement("div");t.classList.add("cell"),e.appendChild(t)}this.board=e}getBoard(t){return this.createBoard(t),this.board}},e=new class{constructor(){this.char=void 0}createChar(){const t=document.createElement("div");t.classList.add("goblin"),this.char=t}getChar(){return this.createChar(),this.char}},s=new class{constructor(t,e){this.board=t,this.boardSize=4,this.char=e,this.activeChar=null,this.boardListeners=[]}init(){this.redrawBoard(),this.board.addEventListener("click",this.onBoardClick.bind(this)),this.start()}redrawBoard(){this.board=this.board.getBoard(this.boardSize);const t=document.querySelector("body"),e=document.createElement("div");e.classList.add("container"),e.innerHTML="<h1 class='title'>Goblin Battle!</h1>",this.counter=this.createGoblinCounter(),e.appendChild(this.counter),e.appendChild(this.board),t.insertBefore(e,t.firstChild),this.cells=[...this.board.children]}createGoblinCounter(){return this.goblinCounter=document.createElement("div"),this.goblinCounter.classList.add("status"),this.goblinCounter.innerHTML='Убито гоблинов:<span class="dead">0</span><br>Промахов: <span class="lost">0</span><br>',this.goblinCounter}onBoardClick(t){t.preventDefault(),this.dead=document.querySelector(".dead"),this.lost=document.querySelector(".lost"),this.boardListeners.forEach((e=>e(t.target))),t.target.classList.contains("goblin")?(++this.dead.textContent,t.target.classList.remove("goblin")):++this.lost.textContent,this.dead.textContent>=10&&(this.resetScore(),alert("Победа!!")),this.lost.textContent>=5&&(this.resetScore(),alert("Поражение!")),this.changeCursor()}generateposition(){const t=Math.floor(Math.random()*this.boardSize**2);t!==this.position?(this.deletedChar(),this.position=t,this.adventChar()):this.generateposition()}deletedChar(){null!==this.activeChar&&this.cells[this.position].firstChild.remove()}adventChar(){this.activeChar=this.char.getChar(),this.cells[this.position].appendChild(this.activeChar)}resetScore(){this.lost.textContent=0,this.dead.textContent=0}changeCursor(){this.board.classList.toggle("hammer"),this.board.classList.toggle("hammer-boom")}start(){setInterval((()=>{this.generateposition()}),1e3)}}(t,e);s.init(),console.log("Let`s go!")})();